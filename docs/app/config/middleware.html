<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>ifnode - simple, flexible, super-light and pluginnable library</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/assets/css/open-sans.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/prism-default.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css" media="screen">
    </head>
    <body>
        <header class="page-header">
            <div class="project-name">
                <a href="/">ifnode</a>
            </div>
            <div class="project-tagline">Simple, flexible, super-light and pluginnable library</div>
            <div class="project-buttons">
                <a href="https://github.com/ilfroloff/ifnode" class="btn">View on GitHub</a>
            </div>
        </header>
        <main class="centered-content main-content docs">
            <aside id="toc">
    <ul>
<li><a href="/docs/intro">Introduction</a><ul>
<li><a href="/docs/intro/ideology">Ideology</a></li>
</ul>
</li>
<li><a href="/docs/install">Install</a></li>
<li><a href="/docs/app">Application Items</a><ul>
<li><a href="/docs/app/structure">Structure</a></li>
<li><a href="/docs/app/file">app.js</a></li>
<li><a href="/docs/app/config">Config</a><ul>
<li><a href="/docs/app/config/default">Default config</a></li>
<li><strong>Middleware</strong></li>
</ul>
</li>
<li><a href="/docs/app/extensions">Extensions</a></li>
<li><a href="/docs/app/models">Models</a></li>
<li><a href="/docs/app/components">Components</a></li>
<li><a href="/docs/app/controllers">Controllers</a></li>
<li><a href="/docs/app/plugins">Plugins</a><ul>
<li><a href="/docs/app/plugins/component">component</a></li>
<li><a href="/docs/app/plugins/controller">controller</a></li>
<li><a href="/docs/app/plugins/schema">schema</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/api">API</a><ul>
<li><a href="/docs/api/ifnode">ifnode</a></li>
<li><a href="/docs/api/iconnectionserver">IConnectionServer</a></li>
<li><a href="/docs/api/app">app</a><ul>
<li><a href="/docs/api/app/model">app.Model</a></li>
<li><a href="/docs/api/app/component">app.Component</a></li>
<li><a href="/docs/api/app/controller">app.Controller</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</aside>
<section id="docs">
    <h2 id="middleware">Middleware</h2>
<p>Middleware is special field of <code>config.application</code>. Here can set different <code>express.js</code> middleware and create own.</p>
<h3 id="set-middleware">Set middleware</h3>
<p>Can three possibilities to set middleware:</p>
<ul>
<li>By object</li>
<li>By array</li>
<li>By function</li>
</ul>
<p>Notes:</p>
<ol>
<li>in <code>by object</code> and <code>by array</code> key is name of npm module. </li>
<li>in <code>by function</code> key can be any.</li>
</ol>
<p>Order of middleware load is <code>natural</code> (first key - first load, second key - second load, etc)</p>
<h3 id="by-object">by object</h3>
<p>For middleware where options is one object. For example, <em><a href="https://www.npmjs.com/package/connect-multiparty">connect-multiparty</a></em>:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
    application<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        middleware<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
            <span class="token string" >'connect-multiparty'</span><span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
                maxFilesSize<span class="token punctuation" >:</span> <span class="token number" >10</span> <span class="token operator" >*</span> <span class="token number" >1024</span> <span class="token operator" >*</span> <span class="token number" >1024</span> <span class="token comment" spellcheck="true">// '10mb'</span>
            <span class="token punctuation" >}</span>
        <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<h3 id="by-array">by array</h3>
<p>For middleware where options is several agruments. For example, <em><a href="https://www.npmjs.com/package/serve-static">serve-static</a></em>:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
    application<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        middleware<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
            <span class="token string" >'serve-static'</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'public/'</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span> extensions<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'js'</span><span class="token punctuation" >,</span> <span class="token string" >'css'</span><span class="token punctuation" >]</span> <span class="token punctuation" >}</span><span class="token punctuation" >]</span>
        <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<h3 id="by-function">by function</h3>
<p>&quot;Raw&quot; set of middleware. Possibility to create own middleware or attach any external middleware:</p>
<pre><code class="lang-javascript"><span class="token keyword" >var</span> session <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'express-session'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    connect_mongo <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'connect-mongo'</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span>session<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token punctuation" >{</span>
    application<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        middleware<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
            <span class="token string" >'own-middleware'</span><span class="token punctuation" >:</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>app<span class="token punctuation" >,</span> express<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                app<span class="token punctuation" >.</span><span class="token function" >use</span><span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span>request<span class="token punctuation" >,</span> response<span class="token punctuation" >,</span> next<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                    <span class="token comment" spellcheck="true">// do something</span>
                    <span class="token function" >next</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
                <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
            <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
            <span class="token string" >'attach-session'</span><span class="token punctuation" >:</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>app<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
                app<span class="token punctuation" >.</span><span class="token function" >use</span><span class="token punctuation" >(</span><span class="token function" >session</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
                    resave<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span>
                    saveUninitialized<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
                    cookie<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>

                    store<span class="token punctuation" >:</span> <span class="token keyword" >new</span> <span class="token class-name" >connect_mongo</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
                        db<span class="token punctuation" >:</span> <span class="token string" >'database'</span><span class="token punctuation" >,</span>
                        host<span class="token punctuation" >:</span> <span class="token string" >'localhost'</span><span class="token punctuation" >,</span>
                        port<span class="token punctuation" >:</span> <span class="token number" >27017</span>
                    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
                <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
            <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>

</section>
<section id="toc-page">
    <a href="/docs/toc">Table of Content</a>
</section>

        </main>
        <footer class="page-footer">
            <span class="owner">
                <a href="https://github.com/ilfroloff/ifnode">ifnode</a> is maintained by <a href="https://github.com/ilfroloff">ilfroloff</a> Â©
            </span>
        </footer>
    </body>
</html>
